spring.application.name=matriculas-service

# CONFIGURACIN DEL SERVIDOR
server.port=${SERVER_PORT:8080}
server.servlet.context-path=${SERVER_CONTEXT_PATH:/api/v1}

# Configuraci贸n de codificaci贸n
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# CONFIGURACIN DE POSTGRESQL
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:matriculas_db}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:admin}
spring.datasource.driver-class-name=org.postgresql.Driver

# Pool de conexiones
spring.datasource.hikari.maximum-pool-size=${DB_POOL_MAX_SIZE:10}
spring.datasource.hikari.minimum-idle=${DB_POOL_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=${DB_POOL_TIMEOUT:30000}
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# CONFIGURACIN JPA/HIBERNATE
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=${JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.format_sql=${JPA_FORMAT_SQL:true}
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.jdbc.time_zone=${APP_TIMEZONE:America/Lima}

# Habilitar estad铆sticas de Hibernate
spring.jpa.properties.hibernate.generate_statistics=false

# CONFIGURACIN DE LOGGING
logging.level.root=${LOG_LEVEL_ROOT:INFO}
logging.level.com.springback.apimatriculas=${LOG_LEVEL_APP:DEBUG}
logging.level.org.springframework.web=${LOG_LEVEL_WEB:DEBUG}
logging.level.org.hibernate.SQL=${LOG_LEVEL_SQL:DEBUG}
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Patr贸n de logging
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# CONFIGURACIN DE ACTUATOR
management.endpoints.web.exposure.include=${ACTUATOR_ENDPOINTS:health,info,metrics}
management.endpoint.health.show-details=${ACTUATOR_SHOW_DETAILS:always}

# Informaci贸n de la aplicaci贸n
info.app.name=${APP_NAME:API Sistema de Matr铆culas}
info.app.description=${APP_DESCRIPTION:API REST para gesti贸n de matr铆culas universitarias}
info.app.version=${APP_VERSION:1.0.0}

# CONFIGURACIN DE SWAGGER/OPENAPI
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=${SWAGGER_PATH:/swagger-ui.html}
springdoc.swagger-ui.enabled=${SWAGGER_ENABLED:true}
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha

# CONFIGURACIN DE FORMATO DE FECHA
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=${APP_TIMEZONE:America/Lima}
spring.jackson.default-property-inclusion=non_null

# CONFIGURACIN DE EUREKA CLIENT
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.instance.prefer-ip-address=true
eureka.instance.instance-id=${spring.application.name}:${server.port}

# CONFIGURACIN DE KAFKA PRODUCER
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer